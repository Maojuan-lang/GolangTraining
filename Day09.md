# Golang

---

## 程序流程控制介绍

在程序中，程序运行的流程控制决定程序是如何执行的，是我们必须掌握的，只要有三大流程控制语句。

1. 顺序控制
2. 分支控制
3. 循环控制

---

## 顺序控制

顺序控制介绍：程序从上往下逐行的执行，中间没有任何判断和跳转

---

## 分支控制if-else

分值控制if-else介绍：让程序有选择的执行，分支控制有三种：

1. 单分支
2. 双分支
3. 多分支

注意事项：Go的if还有一个强大的地方就是条件判断语句里面允许声明有个变量，这个变量的作用域只能在该条件逻辑块内，其他地方就不起作用了

---

## 单分支

基本语法

```go
if 条件表达式{
    执行代码块
}
```

说明：当条件表达式为true时，就会执行{}的代码，其中{}是必须有的

---

## 双分支

基本语法

```go
if 条件表达式{
    执行代码块1
}else{
    执行代码块2
}
```

说明：当条件表达式成立，就执行代码块1，否则执行代码块2，{}是必须有的

---

## 多分支

基本语法

```go
if 条件表达式{
    执行代码块1
}else if{
    执行代码块2
}
...
else{
    执行代码块n
}

```

说明：

1. 多分支的判断流程如下：
   1. 先判断条件表达式1是否成立，如果为真，就执行代码块1
   2. 如果条件表达式1如果为假，就去判断条件表达式2是否成立，如果条件表达式2为真，就执行代码块2
   3. 以此类推
   4. 如果所有的条件表达式不成立，则执行else的语句块
2. else不是必须的
3. 多分支只能有一个执行入口 

---

## 嵌套分支

基本介绍：在一个分支结构中又完整的嵌套了另一个完整的分支结构，里面的分支结构成为内层分支，外面的分支结构称为外层分支。

基本语法

```go
if 条件表达式{
    if 条件表达式{
    }else{       
    }
}
```

说明：嵌套分支不宜过多，建议控制在3层内

---

## Switch分支结构

基本介绍：

1. switch语句用于基本不同条件执行不同动作，每一个case分支都是唯一的，从上到下逐一测试，直到匹配为止。
2. 匹配项后面也不需要再加break

基本语法

```go
switch 表达式{
    case 表达式1，表达式2，...:
    	语句块1
    case 表达式3，表达式4，...:
    	语句块2
    ...
    case 表达式n，表达式n+1，...:
    	语句块n+1/2
    default:
    	语句块
}
```

说明：

1. switch的执行流程是，先执行表达式，得到值，然后和case的表达式进行比较，如果想等，就匹配到指定case并执行该case下的语句块，然后退出switch控制
2. 如果switch的表达式的值没有和任何的case的表达式匹配成功，则执行default的语句块。执行后退出switch的控制
3. golang的case后的表达式可以有多个，使用逗号间隔
4. golang中的case语句块不需要写break，因为默认会有。默认情况下，当程序执行完case语句块后，会直接退出该switch控制结构

注意事项：

1. case后是一个表达式
2. case后的各个表达式的值的数据类型，必须和switch的表达式数据类型一致
3. case后面可以带多个表达式，使用逗号间隔
4. case后面的表达式如果是常量值，则要求不能重复
5. case后面不需要带break，程序匹配到一个case后就会执行对应的代码块，然后退出switch，如果一个都匹配不到，则执行default
6. default语句不是必须的
7. switch后面可以不带表达式，类似于if-else分支来使用
8. switch后也可以直接声明/定义一个变量，分号结束，不推荐使用
9. switch穿透-fallthrough，如果在case语句块后加fallthrough，则会继续执行下一个case，也叫switch穿透，默认只能穿透一层
10. Type Switch：switch语句还可以被用于type-switch来判断某个interface变量中实际指向的变量类型

---

## switch和if的比较

比较：

1. 如果判断的具体数值不多，而且符合整数，浮点数，字符，字符串这几种类型，建议使用switch语句，简洁高效
2. 其他情况，对区间判断和结果为bool类型的判断，使用if，if的使用范围更广

---

## for循环控制

基本介绍：可以让代码循环执行

基本语法

```go
for 循环遍历初始化;循环条件;循环变量迭代{
    循环操作（语句）
}
```

for循环四要素：

1. 循环变量初始化
2. 循环条件
3. 循环操作，也叫循环体
4. 循环变量迭代

for循环回字形的顺序说明：

1. 执行循环变量初始化
2. 执行循环条件
3. 如果循环条件为真，执行循环操作
4. 执行循环变量迭代
5. 反复执行2，3，4步骤，直到循环条件为False，就退出For循环

注意事项：

1. 循环条件是返回一个布尔值的表达式

2. for循环的第二种使用方式

   ```go
   for 循环判断条件{
       // 循环执行语句
   }
   ```

   将变量初始化和变量迭代写到其他位置

3. for循环的第三种使用方式

   ```go
   for{
       // 循环执行语句
   }
   ```

   上面的写法等价于for;;{}是一个无限循环，通常需要配合break语句使用

4. Golang提供for-range的方式，可以方便遍历字符串和数组。for-range在遍历字符串的时候，是按照字符来遍历的，而不是按照字节来遍历的

5. 如果我们的字符串中含有中文，那么传统遍历字符串的方式，就会出现乱码。原因是传统的对字符串的遍历是按照字节来遍历的，而一个汉字在utf-8编码是对应三个字节

   1. 解决方法1：需要将str转成[]rune切片
   2. 解决方法2：对应for-range遍历方式而言，是按照字符方式遍历

---

## while和do...while的实现

Go语言没有while和do...while语法，如果我们需要使用，可以通过for循环来实现使用效果

1. for循环实现while效果：

   ```go
   循环变量初始化
   for{
       if 循环条件表达式{
           break // 跳出for循环
       } 
       循环操作（语句）
       循环变量迭代
   }
   ```

   1. for循环是一个无限循环
   2. break语句就是跳出for循环

2. for循环实现do...while效果:

   ```go
   循环变量初始化
   for{
       循环操作（语句）
       循环变量迭代
       if 循环条件表达式{
           break // 跳出for循环
       } 
   }
   ```

   1. 上面的循环是先执行在判断，因此至少执行一次
   2. 当循环条件  

---

## 多重循环控制

介绍：

1. 将一个循环放在另一个循环体内，就形成了嵌套循环。在外边的for称为外层循环，在里面的for循环称为内层循环。
2. 实质上，嵌套循环就是把内层循环当成外层循环的循环体。当只有内层循环的循环条件为false时，才会完全跳出内层循环，才可以结束外层循环的当次循环，开始下一次的循环
3. 外层循环的次数为m次，内层为n次，则内层循环实际上需要执行m*n=mn次

---

## 跳转空指针语句-break

基本介绍：break语句用于终止某个语句块的执行，用于中断当前for循环或跳出switch语句

基本语法

```go
{
    ...
    break
    ...
}
```

注意事项：

1. break语句出现在多层嵌套的语句块中时，可以通过标签指明要终止的是哪一层语句块
2. 标签的基本使用
3. break默认会跳出最近的for循环
4. break后面可以指定标签，跳出标签对应的for循环

```go
label1:{...
    label2:{...
        label3:{
            ...
            break label
            ...
        }
    }
}
```

---

## 跳转控制语句-continue

基本介绍：

1. continue语句用于结束本次循环，继续执行下一次循环
2. continue语句出现在多层嵌套的循环语句体中时，可以通过标签指明要跳过的是哪一层循环，这个和前面的标签的使用的规则一样

基本语法

```go
{
    ...
    continue
    ...
}
```

---

## 跳转控制语句-goto

介绍：

1. Go语言的goto语句可以无条件地转移到程序中指定的行
2. goto语句通常与条件语句配合使用，可以用来实现条件转移，跳出循环体等功能
3. 在Go程序设计中一般不主张使用goto语句，以免造成程序流程的混乱，使得理解和调试程序都产生困难

基本语法：

```go
goto label
...
label:statement
```

---

## 跳转控制语句-return

基本介绍：return使用在方法或者函数中，表示跳出所在的方法或者函数

注意事项：

1. 如果return是在普通的函数，则表示跳出该函数，即不再执行函数中return后面代码，也可以理解成终止函数
2. 如果return是在main函数，表示终止main函数，也就是说终止程序